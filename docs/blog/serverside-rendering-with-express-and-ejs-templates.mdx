![](https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63dd7fd22cdd9d59ecd75dd4_8_d9790cfe55001a53510782f28b13dbb7_2000.jpeg)
"javascript-8"
# Serverside Rendering With Express And EJS Templates
> Wed Apr 05 2023 16:53:15 GMT+0000 (Coordinated Universal Time)

Server-side rendering means using a server to generate HTML files. This generation/rendering of HTML files is in response to a URL request to the server. Server-side, unlike client-side rendering, utilizes JavaScript modules to render HTML instead of the browser and DOM element. This article will examine how we can achieve server-side rendering using an<a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer"> Express</a> server and EJS for templating.

## What is EJS?
EJS is a JavaScript templating language for generating HTML with plain JavaScript. In addition, it provides support for writing JavaScript alongside HTML by utilizing unique tags.
A template language is a language that allows you to create placeholders that we can substitute for different values within our code. Templating with EJS provides a simple syntax that is easy to understand and aids fast development time. Also, EJS allows you to divide your HTML into sub-templates that can be reused and included in different templates.

### EJS tags and uses

![](ow.com/6143afec68f555387049efb3/631f5404dd23a2d571461273_ScreenShot2022-09-08at1_04_32PM_05debc67f78afdaf4264d76495139ba6_800.p)

## Getting Started
To get started, we will need to create an express application; to do this, you must have Node.js installed. (You can download Node.js<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer"> here</a> if you do not already have it.) After this, create a new folder, &quot;express-ejs,&quot; and run the command below in the newly created folder.
```
npm init -y
```
The command will create the new node environment we will need for development. Following this, we will install all required dependencies.
```
npm install express ejs nodemon
```
The code block above will install the Express framework and EJS templating engine.

### Set up Express Application
In this section, we will set up the Express server. First, create an app.js file and views folder.
```
const express = require(&quot;express&quot;);
const app = express();
app.use(express.json());
app.use(express.static(__dirname + &quot;/public&quot;));
app.set(&quot;view engine&quot;, &quot;ejs&quot;);
app.set(&quot;views&quot;, &quot;./views&quot;);
module.exports = app
```
The ```express.json()``` is an<a href="http://expressjs.com/en/guide/using-middleware.html#using-middleware" target="_blank" rel="noopener noreferrer"> Express middleware</a> that allows you to parse requests sent with a<a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer"> JSON</a> payload. We will also specify the folder to serve<a href="https://expressjs.com/en/starter/static-files.html" target="_blank" rel="noopener noreferrer"> static files</a> using ```express.static()``` middleware; this accepts the directory for the static files as a parameter.

The code block above also creates a new Express application that sets up the template engine. In Express, ```views``` indicate the directory where the template files exist; in this case, we will pass the views folder as the second parameter. Once you specify ```views```, Express will load the template engine module internally.

Following this, we will update the package.json to the code below:
```
{
&quot;name&quot;: &quot;express-ejs&quot;,
&quot;version&quot;: &quot;1.0.0&quot;,
&quot;description&quot;: &quot;A simple app showing how to render ejs template from an express server.&quot;,
&quot;main&quot;: &quot;server.js&quot;,
&quot;author&quot;: &quot;Melvin Kosisoschukwu&quot;,
&quot;license&quot;: &quot;MIT&quot;,
&quot;scripts&quot;: {
&quot;start&quot;: &quot;node server.js&quot;,
&quot;start-dev&quot;: &quot;nodemon server.js&quot;
},
&quot;dependencies&quot;: {
&quot;ejs&quot;: &quot;^3.1.8&quot;,
&quot;express&quot;: &quot;^4.18.1&quot;,
&quot;nodemon&quot;: &quot;^2.0.19&quot;
}

```
In the project folder, create a ```server.js``` file with the following code:
```
const app = require(&quot;./app&quot;);
const PORT = process.env.PORT || 4400;
app.listen(PORT, () =&gt; {
console.log(&quot;Server is running on port &quot; + PORT);
})
```
The code block above will create a new Express server that listens for connections between the specified host and port.

## EJS
After bootstrapping the Express server, we will work on the template engine in the views folder. We will first set up the header and footer as partials; these are sub-templates you would like to reuse across other templates.

### Styling headers and footers
In the views folder, create a partials folder with two files;<a href="https://github.com/MelvinManni/express-ejs/blob/main/views/partials/header.ejs" target="_blank" rel="noopener noreferrer"> header.ejs</a> and<a href="https://github.com/MelvinManni/express-ejs/blob/main/views/partials/footer.ejs" target="_blank" rel="noopener noreferrer"> footer.ejs</a>. Partials are added to other files using include; this accepts the file path as a value. The usage for include is demonstrated below:

The next step will be to set up the pages for the application and serve them from the Express application. First, we will create an index.ejs file with the following code:
```
&lt;%- include(&quot;partials/header.ejs&quot;) -%&gt;
&lt;div&gt;
*&lt;!--  --&gt;*
&lt;h1 class=&quot;text-center&quot;&gt;
Home Page
&lt;/h1&gt;
&lt;p class=&quot;text-center mt-4&quot;&gt;
&lt;a href=&quot;/posts&quot;&gt;
View Posts
&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;%- include(&quot;partials/footer.ejs&quot;) -%&gt
```
In the code block above, we added the header and footer using include in the file and the information we want for the home page. Next, we will serve the index.ejs page from the Express app:
```
const express = require(&quot;express&quot;);
const app = express();
app.use(express.json());
app.use(express.static(__dirname + &quot;/public&quot;));
app.set(&quot;view engine&quot;, &quot;ejs&quot;);
app.set(&quot;views&quot;, &quot;./views&quot;);
const posts = [
{
id: &quot;1&quot;,
title: &quot;Post 1&quot;,
body: &quot;This is post 1&quot;,
},
{
id: &quot;2&quot;,
title: &quot;Post 2&quot;,
body: &quot;This is post 2&quot;,
},
{
id: &quot;3&quot;,
title: &quot;Post 3&quot;,
body: &quot;This is post 3&quot;,
},
];
app.get(&quot;/&quot;, (req, res) =&gt; {
res.render(&quot;index&quot;, {});
});
module.exports = app
```
From the code block above, we have a method that responds to GET requests on the &quot;/&quot; route. Within the method, we render the index file as a response by calling the ```res.render()``` method; this accepts two parameters: the file's name to render and the data to pass to the file. To test this, we will run ```npm start-dev``` in the terminal. Visit<a href="http://localhost:4400/" target="_blank" rel="noopener noreferrer"> http://localhost:4400/</a> on your web browser; you should see the index.ejs page rendered.
![](ebflow.com/6143afec68f555387049efb3/631f5403dd23a25e93461245_ScreenShot2022-09-08at1_09_40PM_fade28ded04b99ff4153331305a14ca0_800.p)

### Injecting dynamic data into the EJS template
Following the previous section, we will look at how to use the data passed to the EJS template. In the views folder, create a posts.ejs file with the following code:
```
&lt;%- include(&quot;partials/header.ejs&quot;) -%&gt;
&lt;div&gt;
&lt;h1 class=&quot;text-center&quot;&gt;
Posts
&lt;/h1&gt;
&lt;div class=&quot;mt-4&quot;&gt;
&lt;% for (let post of posts) { %&gt;
&lt;div class=&quot;card mb-4&quot;&gt;
&lt;div class=&quot;card-body&quot;&gt;
&lt;h2 class=&quot;card-title&quot;&gt;&lt;%= post.title %&gt;&lt;/h2&gt;
&lt;p class=&quot;card-text&quot;&gt;&lt;%= post.body %&gt;&lt;/p&gt;
&lt;a href=&quot;/post/&lt;%= post.id %&gt;&quot; class=&quot;btn btn-primary&quot;&gt;
View Post
&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;% } %&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;%- include(&quot;partials/footer.ejs&quot;) -%&gt
```
The template above expects the &quot;posts&quot; variable to exist in the data injected on a template render. Using the EJS template tags, we will loop through posts passed to the template and render the HTML file for each post data. In the Express app, we will add the code block below the GET method for the index route to render the posts.ejs file:
```
...
app.get(&quot;/posts&quot;, (req, res) =&gt; {
res.render(&quot;posts&quot;, { posts });
} );
...```
From the code block above, we will render the posts.ejs file with the posts variable passed to the template. We can preview the posts page by visiting<a href="http://localhost:4400/posts" target="_blank" rel="noopener noreferrer"> http://localhost:4400/posts</a>.
![](/uploads-ssl.webflow.com/6143afec68f555387049efb3/631f5403dd23a23fab461244_ScreenShot2022-09-08at1_20_29PM_fbaa5d9ac29a09c2fde29fd7f6de9f11_800.p)

Next, we will set up a dynamic page that renders individual posts. But, first, we will create a post.ejs file with the code:
```
&lt;%- include(&quot;partials/header.ejs&quot;) -%&gt;
&lt;h1 class=&quot;text-center&quot;&gt;
&lt;%= title %&gt;
&lt;/h1&gt;
&lt;p class=&quot;mt-3&quot;&gt;
&lt;%= body %&gt;
&lt;/p&gt;
&lt;%- include(&quot;partials/footer.ejs&quot;) -%&gt
```
The code block will accept a data object with the keys title and body. Using EJS tags, we will display the value of the keys in the HTML. Finally, we will add the code block in the app.js to render the post page:
```
...
app.get(&quot;/post/:id&quot;, (req, res) =&gt; {
const post = posts.find(post =&gt; post.id === req.params.id);
res.render(&quot;post&quot;, post);
} );
app.all(&quot;*&quot;, (req, res) =&gt; {
res.status(404).send(&quot;404 Not Found&quot;);
} );
module.exports = app
```
In the GET method, we have an id parameter passed to the request URL. We will use the id parameter to find the needed post from the posts variable and pass it to the post.ejs template. We can test this by visiting<a href="http://localhost:4400/post/1" target="_blank" rel="noopener noreferrer"> http://localhost:4400/post/1</a>, 1 being the id for the post we want to fetch.
![](s://uploads-ssl.webflow.com/6143afec68f555387049efb3/631f5403dd23a2e18b461246_IuABzkEd_07efa50987fe4a1f6174c45211a23f52.g)

The ```app.all()``` method is used to catch all requests that do not match the routes before it; this is why it is after all declared routes. We are using the ```app.all()``` method to catch all requests to routes that do not exist on our server and return a 404 error.
![](.com/6143afec68f555387049efb3/631f5403dd23a2d018461203_ScreenShot2022-09-08at2_32_19PM_3237b46e88f5e41cf8f74e2e0e2018c8_800.p)

## Conclusion and resources
This article reviewed how to use EJS templates to create reusable partials and leverage the templates when rendering pages from an Express server. We also covered how to create dynamic pages using an Express server. If you want to learn more about EJS and Express, you can find visit the official documents at<a href="https://ejs.co/#docs" target="_blank" rel="noopener noreferrer"> https://ejs.co/#docs</a> and<a href="http://expressjs.com/en/guide/routing.html" target="_blank" rel="noopener noreferrer"> http://expressjs.com/en/guide/routing.html</a>.
